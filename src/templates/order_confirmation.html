<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Confirmation</title>
</head>
<body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
    <div style="text-align: center; margin-bottom: 30px;">
        {{#if store.logo_url}}
        <img src="{{store.logo_url}}" alt="{{store.name}}" style="max-height: 60px;">
        {{else}}
        <h1 style="color: #333; margin: 0;">{{store.name}}</h1>
        {{/if}}
    </div>

    <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
        <h2 style="color: #28a745; margin: 0 0 10px 0;">Thank you for your order!</h2>
        <p style="margin: 0;">Hi {{customer.first_name}},</p>
        <p>We've received your order and it's being processed. Here are the details:</p>
    </div>

    <div style="margin-bottom: 20px;">
        <table style="width: 100%; border-collapse: collapse;">
            <tr>
                <td style="padding: 10px 0; border-bottom: 1px solid #eee;">
                    <strong>Order Number:</strong>
                </td>
                <td style="padding: 10px 0; border-bottom: 1px solid #eee; text-align: right;">
                    #{{order.number}}
                </td>
            </tr>
            <tr>
                <td style="padding: 10px 0; border-bottom: 1px solid #eee;">
                    <strong>Order Date:</strong>
                </td>
                <td style="padding: 10px 0; border-bottom: 1px solid #eee; text-align: right;">
                    {{order.date}}
                </td>
            </tr>
            <tr>
                <td style="padding: 10px 0; border-bottom: 1px solid #eee;">
                    <strong>Payment Method:</strong>
                </td>
                <td style="padding: 10px 0; border-bottom: 1px solid #eee; text-align: right;">
                    {{order.payment_method}}
                </td>
            </tr>
        </table>
    </div>

    <h3 style="border-bottom: 2px solid #333; padding-bottom: 10px;">Order Items</h3>

    <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
        <thead>
            <tr style="background-color: #f8f9fa;">
                <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Product</th>
                <th style="padding: 10px; text-align: center; border-bottom: 1px solid #ddd;">Qty</th>
                <th style="padding: 10px; text-align: right; border-bottom: 1px solid #ddd;">Price</th>
            </tr>
        </thead>
        <tbody>
            {{#each order.items}}
            <tr>
                <td style="padding: 10px; border-bottom: 1px solid #eee;">
                    <div style="display: flex; align-items: center;">
                        {{#if image_url}}
                        <img src="{{image_url}}" alt="{{name}}" style="width: 50px; height: 50px; object-fit: cover; margin-right: 10px; border-radius: 4px;">
                        {{/if}}
                        <div>
                            <strong>{{name}}</strong>
                            {{#if sku}}<br><small style="color: #666;">SKU: {{sku}}</small>{{/if}}
                        </div>
                    </div>
                </td>
                <td style="padding: 10px; text-align: center; border-bottom: 1px solid #eee;">{{quantity}}</td>
                <td style="padding: 10px; text-align: right; border-bottom: 1px solid #eee;">{{total}}</td>
            </tr>
            {{/each}}
        </tbody>
    </table>

    <table style="width: 100%; max-width: 300px; margin-left: auto; margin-bottom: 20px;">
        <tr>
            <td style="padding: 5px 0;">Subtotal:</td>
            <td style="padding: 5px 0; text-align: right;">{{order.subtotal}}</td>
        </tr>
        {{#if order.discount}}
        <tr style="color: #28a745;">
            <td style="padding: 5px 0;">Discount:</td>
            <td style="padding: 5px 0; text-align: right;">-{{order.discount}}</td>
        </tr>
        {{/if}}
        <tr>
            <td style="padding: 5px 0;">Shipping:</td>
            <td style="padding: 5px 0; text-align: right;">{{order.shipping}}</td>
        </tr>
        <tr>
            <td style="padding: 5px 0;">Tax:</td>
            <td style="padding: 5px 0; text-align: right;">{{order.tax}}</td>
        </tr>
        <tr style="font-size: 18px; font-weight: bold; border-top: 2px solid #333;">
            <td style="padding: 10px 0;">Total:</td>
            <td style="padding: 10px 0; text-align: right;">{{order.total}}</td>
        </tr>
    </table>

    <div style="display: flex; gap: 20px; margin-bottom: 20px;">
        <div style="flex: 1;">
            <h4 style="margin: 0 0 10px 0; color: #666;">Shipping Address</h4>
            <p style="margin: 0; line-height: 1.8;">
                {{order.shipping_address.name}}<br>
                {{order.shipping_address.line1}}<br>
                {{#if order.shipping_address.line2}}{{order.shipping_address.line2}}<br>{{/if}}
                {{order.shipping_address.city}}, {{order.shipping_address.state}} {{order.shipping_address.postal_code}}<br>
                {{order.shipping_address.country}}
            </p>
        </div>
        <div style="flex: 1;">
            <h4 style="margin: 0 0 10px 0; color: #666;">Billing Address</h4>
            <p style="margin: 0; line-height: 1.8;">
                {{order.billing_address.name}}<br>
                {{order.billing_address.line1}}<br>
                {{#if order.billing_address.line2}}{{order.billing_address.line2}}<br>{{/if}}
                {{order.billing_address.city}}, {{order.billing_address.state}} {{order.billing_address.postal_code}}<br>
                {{order.billing_address.country}}
            </p>
        </div>
    </div>

    <div style="text-align: center; margin: 30px 0;">
        <a href="{{order.view_url}}" style="display: inline-block; background-color: #007bff; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; font-weight: bold;">View Order</a>
    </div>

    <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center; margin-top: 30px;">
        <p style="margin: 0 0 10px 0;">Need help? Contact us at <a href="mailto:{{store.email}}">{{store.email}}</a></p>
        <p style="margin: 0; color: #666; font-size: 14px;">{{store.name}} | {{store.address}}</p>
    </div>

    <div style="text-align: center; margin-top: 20px; color: #999; font-size: 12px;">
        <p>This email was sent to {{customer.email}} because you placed an order on {{store.name}}.</p>
    </div>
</body>
</html>
